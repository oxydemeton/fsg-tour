---
import { getCollection } from "astro:content";
import { Image } from 'astro:assets';
import Layout from '../layouts/Layout.astro';

export async function getStaticPaths() {
    const rooms = await getCollection('room2')
    
    return rooms.flatMap((room)=>{
        return room.data.bilder.map((img, i)=>{
            return {
                params: {imageId: `${room.id}/${img.name}`},
                props: {room, imageId: i}
            }
        })
    });
};

/*export const getStaticPaths = ( async () => {
    const rooms = await getCollection("rooms")
    return rooms.map();
}) satisfies GetStaticPaths;*/

const {room, imageId} = Astro.props
const local = Astro.props.room.data.bilder[imageId]

---

<Layout>
<Image src={local.image} alt={local.name} width={1920}></Image>
</Layout>