---
import Map from "../components/Map.astro";
import Layout from '../layouts/Layout.astro';
import { getCollection, getEntry } from 'astro:content';
// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.

const rooms = await getCollection("rooms")
console.log(rooms);
const base = import.meta.env.BASE_URL
---

<Layout>
	<h1>FSG Roomtour</h1>
	<a href="#list">Zur Liste der Räume</a>
	<Map/>
	<h2>Räume:</h2>
	<table id="list">
		{rooms.sort().map(r=><tr>
			<td><a href={`${base}/${r.id}/nord`}>{r.id}</a></td><td><a href={`${base}/${r.id}/nord`}>{r.data.name}</a></td>
		</tr>)}
	</table>
</Layout>

<style>
	a[href="#list"] {
		opacity: 0;
		height: 0;
		width: 0;
		display: block;
	}
	a[href="#list"]:focus-visible {
		opacity: 1;
		height: auto;
		width: max-content;
	}
	td {
		padding-inline: 1ch;
	}
</style>