---
import Door from "./Door.astro";
import Zoomable from "../ZoomableContainer.astro";
const base = import.meta.env.BASE_URL
---
<Zoomable>
    <svg viewBox="0 0 4367 3087">
        <!--OKU -->
        <a href={`${base}/1.411.1/nord`} id="map-1.411" aria-label="Oberer Kunstraum OKU">
            <path d="M  865,316
                    L  865,182
                    L  622,182
                    L  622,585
                    L  865,585
                    L  865,562
                    L  865, 532
                    L  865, 490
                    L  882, 490
                    L  882, 411
                    L  865, 411
                    L  865, 348
                    L  865, 318
                    Z"/>
            <text x="640" y="379" font-size="26" font-weight="500">
                <tspan x="640" y="380">Oberer Kunstraum</tspan>
                <tspan x="640" y="418">(OKU)</tspan>
                <tspan x="640" y="455">1.411</tspan>
            </text>
        </a>
        <Door clockvise={true} pos={{x: 865, y: 562}} rotation="0"/>
        
        <!--OKU Nebenraum-->
        <a id="map-1.412" href={`${base}/1.412/nord`} aria-label="OKU Nebenraum">
            <path d="M  865, 317
                    L  865, 260
                    L  1021, 260
                    L  1021, 411
                    L  865,411
                    Z"/>
            <text x="898" y="330" font-size="24" font-weight="500">
                <tspan x="898" y="330">Nebenraum</tspan>
                <tspan x="905" y="360">1.412</tspan>
            </text>
        </a>

        <Door clockvise={true} pos={{x: 865, y: 348}} rotation="0"/>

        <!--Putzmittelraum neben OKU-->
        <a id="map-1.410" href=`${base}/1.410/nord` aria-label="Putzmittelraum">
            <path d="M  882 411
                    L  1021, 411
                    L  1021, 490
                    L  1003, 490
                    L  974 490
                    L  882 490 
                    L  882 411"/>
            <text x="900" y="455" font-size="26" font-weight="500">
                PM 1.410
            </text>
        </a>
        <Door clockvise={true} pos={{x: 1003, y: 490}} rotation="270"/><!--TODO Fix door rotation/flip horizontal -->

        <!--Treppe Notuasgang beim OKU und Forum 1 -->
        <a href=`${base}/1.409.1/nord` aria-label="Treppe Notuasgang beim OKU und Forum 1">
            <path d="M  1021 260,
                    L   1143 260,
                    L   1143 490,
                    L   1021 490
                    L   1021 260
                "/>
            <!--Treppe-->
            <g class="map-treppe">
                <rect x="1023" y="312" width="55" height="106"/>
                <line x1="1023" y1="322" x2="1078" y2="322"/>
                <line x1="1023" y1="333" x2="1078" y2="333"/>
                <line x1="1023" y1="344" x2="1078" y2="344"/>
                <line x1="1023" y1="355" x2="1078" y2="355"/>
                <line x1="1023" y1="366" x2="1078" y2="366"/>
                <line x1="1023" y1="377" x2="1078" y2="377"/>
                <line x1="1023" y1="388" x2="1078" y2="388"/>
                <line x1="1023" y1="399" x2="1078" y2="398"/>
                <line x1="1023" y1="410" x2="1078" y2="408"/>

                <rect x="1085" y="312" width="55" height="106"/>
                <line x1="1085" y1="322" x2="1140" y2="322"/>
                <line x1="1085" y1="333" x2="1140" y2="333"/>
                <line x1="1085" y1="344" x2="1140" y2="344"/>
                <line x1="1085" y1="355" x2="1140" y2="355"/>
                <line x1="1085" y1="366" x2="1140" y2="366"/>
                <line x1="1085" y1="377" x2="1140" y2="377"/>
                <line x1="1085" y1="388" x2="1140" y2="388"/>
                <line x1="1085" y1="399" x2="1140" y2="398"/>
                <line x1="1085" y1="410" x2="1140" y2="408"/>
            </g>
        </a>
        <Door clockvise={true} pos={{x: 1084, y: 490}} rotation="270"/><!--TODO Fix door rotation/flip horizontal -->
        <Door clockvise={true} pos={{x: 1118, y: 490}} rotation="270"/>

        <a id="map-1.408a" href=`${base}/1.408a.1/nord` aria-label="Forum 1 BÃ¼hne">
            <path d="M  1021 260
                    L   1143
            
                "/>
        </a>

        <!--WC neben OKU-->
        <a id="map-1.413" href=`${base}/1.413/nord` aria-label="WC neben OKU">
            <path d="M  865, 585
                    L  725, 585
                    L  725, 630
                    L  865, 630
                    Z"/>
            <text x="740" y="616" font-size="26" font-weight="500">WC 1.413</text>
        </a>
        <Door clockvise={true} pos={{x: 865, y: 625 }} rotation="0"/>

        <a id="map-1.414" href=`${base}/1.414.2/nord` aria-label="Klassen raum 1.414">
            <path d="M  725, 630
                    L  967, 630
                    L  967, 673
                    L  967, 703
                    L  967, 920
                    L  725, 920
                    Z"/>
            <text x="740" y="760" font-size="26" font-weight="500">
                Klassenraum 1.414
            </text>
        </a>
        <Door clockvise={true} pos={{x: 967, y: 703}} rotation="0"/> <!--TODO FIX door directions/flip it -->

        <a href=`${base}/1.415.2/nord` aria-label="Klassenraum 1.415">
            <path d="M 725 920
                    L   967 920
                    L   967 952
                    L   967 984
                    L   967 1165
                    L   725 1165
                    L 725 920"/>
        </a>
    </svg>
</Zoomable>

<style>
    svg {
        isolation: isolate;
    }
    line, polyline, path,rect {
        stroke: currentColor;
        stroke-width: 8;
        fill: transparent;
        padding: 0;
        margin: 0;
    }
    a {
        padding: 0;
        margin: 0;
        z-index: -10;
    }
    a:hover :is(path) {
        fill: var(--highlight-bg-color);
        border: none;
        stroke-width: 14;
    }
    a:focus-visible {
        border: none;
        outline: none;
        path {
            fill: var(--highlight-bg-color);
        }
        z-index: 10;
    }
    a:hover {
        z-index: 10;
    }
    text {
        font-size: 512;
        fill: currentColor;
    }
    .map-treppe rect {
        fill: none;
        stroke-width: 3;
        @media (prefers-contrast: more) {
            stroke-width: 5;
        }
    }
    .map-treppe line {
        stroke-width: 2;
        @media not (prefers-reduced-transparency) {
            opacity: .5;
        }
        @media (prefers-contrast: more) {
            stroke-width: 3;
            opacity: 1;
        }
    }
</style>